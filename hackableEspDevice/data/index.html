<!DOCTYPE html>
<html>

<head>
    <title>Smart lights system</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style_switch.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
        
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <script src="jquery.min.js"></script>

    <div class="page">

        <h2 id="system-name">Smart lights system</h2>
        <form id="main-form" class="container-form">
            <div class="wrap-form">
                <label class="form-title" for="name-field">Light System name:</label>
                <input class="form-input" type="text" id="name-field" name="name" />
                <button class="form-button" type="submit">Change</button>
            </div>
        </form>

        <div class="container-form">
            <div class="wrap-form">
                <form class="form">
                    <span class="form-title">Turn on or off</span>
                    <div id="toggles">
                        <input type="checkbox" name="cb_power" id="cb_power" class="ios-toggle" onclick="setPower()" />
                        <label for="cb_power" class="checkbox-label" data-off="off" data-on="on"></label>
                    </div>
                </form>
            </div>
        </div>

        <div class="container-form">
            <div class="wrap-form">
                <form class="form">
                    <span class="form-title">Brightness</span>
                    <input class="brgtSlider" style="background: transparent;" type="range" min="0" max="1023"
                        value="1023" name="brightness" id="brightness" />
                </form>
            </div>
        </div>

        <div class="container-form">
            <div class="wrap-form">
                <span class="form-title">Choose</span>
                <p><a class="button" style="text-decoration:none" href="/user">User page</a></p>
                <p><a class="button" style="text-decoration:none" href="/admin">Admin page</a></p>
            </div>
        </div>
    </div>

    <script src="base.js"></script>
    <script>
        let title;
        let uri = window.localStorage.getItem('uri');
        if (location.href.includes('q=')) {
            uri = decodeURIComponent(location.href);
        }
        const qs = uri.split('&time=')[0].split('?q=')[1]
        if (qs.length > 24) {
            alert("Error!\n Length exceeds 24, keep it short!")
        } else {
            title = qs;
            window.localStorage.setItem('uri', uri);
        }
        if (title) {
            document.title = title;
            document.getElementById("system-name").innerHTML = title;
            document.getElementById("name-field").value = title;
        }
    </script>
</body>
</html>